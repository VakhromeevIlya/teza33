<!DOCTYPE html>
<html>
  <head lang="en">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Picture with type attribute in source to conditionally load WebP -
      Lazyload demos
    </title>
    <style>
      body {
        margin: 0;
      }
      ul {
        display: flex;
        flex-wrap: wrap;
      }
      ul,
      li {
        list-style-type: none;
        margin: 0;
        padding: 0;
        min-height: 160px;
      }

      a {
        display: block;
        position: relative;
        padding-bottom: 100%;
        outline: 1px solid gray;
      }

      img {
        position: absolute;
        top: 0;
        left: 0;
        display: block;
        width: 100%;
        height: auto;
        min-width: 10px;
      }

      img:not([src]) {
        visibility: hidden;
      }

      li {
        width: 50%;
      }

      @media (min-width: 768px) {
        li {
          width: 33.3%;
        }
      }
      @media (min-width: 1024px) {
        li {
          width: 25%;
        }
      }

      /* Fixes Firefox anomaly during image load */

      @-moz-document url-prefix() {
        img:-moz-loading {
          visibility: hidden;
        }
      }
    </style>
  </head>

  <body>
    <h1>
      Picture with type attribute in source to conditionally load WebP demo
    </h1>
    <div id="results1" class="results">
      <ul>
        <li>
          <a href="#1">
            <picture>
              <source
                type="image/webp"
                srcset="
                  https://via.placeholder.com/256.webp?text=256+WebP+Sneakers 256w,
                  https://via.placeholder.com/320.webp?text=320+WebP+Sneakers 320w,
                  https://via.placeholder.com/512.webp?text=512+WebP+Sneakers 512w,
                  https://via.placeholder.com/640.webp?text=640+WebP+Sneakers 640w,
                  https://via.placeholder.com/960.webp?text=960+WebP+Sneakers 960w
                "
                sizes="(min-width: 1024px) 25vw, (min-width: 768px) 33.3vw, 50vw"
              />
              <img
                src="https://via.placeholder.com/256.jpg?text=256+Jpg+Sneakers"
                srcset="
                  https://via.placeholder.com/256.jpg?text=256+Jpg+Sneakers 256w,
                  https://via.placeholder.com/320.jpg?text=320+Jpg+Sneakers 320w,
                  https://via.placeholder.com/512.jpg?text=512+Jpg+Sneakers 512w,
                  https://via.placeholder.com/640.jpg?text=640+Jpg+Sneakers 640w,
                  https://via.placeholder.com/960.jpg?text=960+Jpg+Sneakers 960w
                "
                sizes="(min-width: 1024px) 25vw, (min-width: 768px) 33.3vw, 50vw"
                alt="Sneakers"
              />
            </picture>
          </a>
        </li>
        <li>
          <a href="#2">
            <picture>
              <source
                type="image/webp"
                data-srcset="https://via.placeholder.com/256.webp?text=256+WebP+OpenToe 256w,
									https://via.placeholder.com/320.webp?text=320+WebP+OpenToe 320w,
									https://via.placeholder.com/512.webp?text=512+WebP+OpenToe 512w,
									https://via.placeholder.com/640.webp?text=640+WebP+OpenToe 640w,
									https://via.placeholder.com/960.webp?text=960+WebP+OpenToe 960w"
                data-sizes="(min-width: 1024px) 25vw, (min-width: 768px) 33.3vw, 50vw"
              />
              <img
                data-src="https://via.placeholder.com/256.jpg?text=256+Jpg+OpenToe"
                data-srcset="https://via.placeholder.com/256.jpg?text=256+Jpg+OpenToe 256w,
									https://via.placeholder.com/320.jpg?text=320+Jpg+OpenToe 320w,
									https://via.placeholder.com/512.jpg?text=512+Jpg+OpenToe 512w,
									https://via.placeholder.com/640.jpg?text=640+Jpg+OpenToe 640w,
									https://via.placeholder.com/960.jpg?text=960+Jpg+OpenToe 960w"
                data-sizes="(min-width: 1024px) 25vw, (min-width: 768px) 33.3vw, 50vw"
                alt="Open Toe"
                class="lazy"
              />
            </picture>
          </a>
        </li>
        <li>
          <a href="#3">
            <picture>
              <source
                type="image/webp"
                data-srcset="https://via.placeholder.com/256.webp?text=256+WebP+Stivali 256w,
									https://via.placeholder.com/320.webp?text=320+WebP+Stivali 320w,
									https://via.placeholder.com/512.webp?text=512+WebP+Stivali 512w,
									https://via.placeholder.com/640.webp?text=640+WebP+Stivali 640w,
									https://via.placeholder.com/960.webp?text=960+WebP+Stivali 960w"
                data-sizes="(min-width: 1024px) 25vw, (min-width: 768px) 33.3vw, 50vw"
              />
              <img
                data-src="https://via.placeholder.com/256.jpg?text=256+Jpg+Stivali"
                data-srcset="https://via.placeholder.com/256.jpg?text=256+Jpg+Stivali 256w,
									https://via.placeholder.com/320.jpg?text=320+Jpg+Stivali 320w,
									https://via.placeholder.com/512.jpg?text=512+Jpg+Stivali 512w,
									https://via.placeholder.com/640.jpg?text=640+Jpg+Stivali 640w,
									https://via.placeholder.com/960.jpg?text=960+Jpg+Stivali 960w"
                data-sizes="(min-width: 1024px) 25vw, (min-width: 768px) 33.3vw, 50vw"
                alt="Stivali"
                class="lazy"
              />
            </picture>
          </a>
        </li>
      </ul>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.5.0/dist/lazyload.min.js"></script>
    <script>
      (function () {
        function logElementEvent(eventName, element) {
          console.log(Date.now(), eventName, element.getAttribute("data-src"));
        }

        var callback_enter = function (element) {
          logElementEvent("üîë ENTERED", element);
        };
        var callback_exit = function (element) {
          logElementEvent("üö™ EXITED", element);
        };
        var callback_loading = function (element) {
          logElementEvent("‚åö LOADING", element);
        };
        var callback_loaded = function (element) {
          logElementEvent("üëç LOADED", element);
        };
        var callback_error = function (element) {
          logElementEvent("üíÄ ERROR", element);
          element.src =
            "https://via.placeholder.com/440x560/?text=Error+Placeholder";
        };
        var callback_finish = function () {
          logElementEvent("‚úîÔ∏è FINISHED", document.documentElement);
        };
        var callback_cancel = function (element) {
          logElementEvent("üî• CANCEL", element);
        };

        ll = new LazyLoad({
          // Assign the callbacks defined above
          callback_enter: callback_enter,
          callback_exit: callback_exit,
          callback_cancel: callback_cancel,
          callback_loading: callback_loading,
          callback_loaded: callback_loaded,
          callback_error: callback_error,
          callback_finish: callback_finish
        });
      })();
    </script>
  </body>
</html>